{% extends "feed/base.html" %}
{% from "_form_helpers.html" import render_field %}

{% block title %}Settings{% endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>Settings</h1>
    <form method="POST" action="" class="form-container">

        <!-- Profile Settings -->
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Profile Information</legend>
            <div class="form-group mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" id="name" name="name" class="form-control" value="{{ current_user.name }}">
            </div>
            <div class="form-group mb-3">
                <label for="bio" class="form-label">Bio</label>
                <textarea id="bio" name="bio" class="form-control" rows="3">{{ current_user.bio or '' }}</textarea>
            </div>
        </fieldset>

        <!-- Privacy Settings -->
        <fieldset class="form-group mt-4">
            <legend class="border-bottom mb-4">Privacy</legend>
            <div class="form-group mb-3">
                <label for="privacy_last_seen" class="form-label">Who can see your Last Seen</label>
                <select id="privacy_last_seen" name="privacy_last_seen" class="form-select">
                    <option value="everyone" {% if current_user.privacy_last_seen == 'everyone' %}selected{% endif %}>Everyone</option>
                    <option value="followers" {% if current_user.privacy_last_seen == 'followers' %}selected{% endif %}>Followers</option>
                    <option value="none" {% if current_user.privacy_last_seen == 'none' %}selected{% endif %}>Nobody</option>
                </select>
            </div>
             <div class="form-group mb-3">
                <label for="privacy_profile_pic" class="form-label">Who can see your Profile Picture</label>
                <select id="privacy_profile_pic" name="privacy_profile_pic" class="form-select">
                    <option value="everyone" {% if current_user.privacy_profile_pic == 'everyone' %}selected{% endif %}>Everyone</option>
                    <option value="followers" {% if current_user.privacy_profile_pic == 'followers' %}selected{% endif %}>Followers</option>
                </select>
            </div>
        </fieldset>

        <!-- Notification Settings -->
        <fieldset class="form-group mt-4">
            <legend class="border-bottom mb-4">Notifications</legend>
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="message_notifications" name="message_notifications" {% if current_user.message_notifications_enabled %}checked{% endif %}>
                <label class="form-check-label" for="message_notifications">Private Message Notifications</label>
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="group_notifications" name="group_notifications" {% if current_user.group_notifications_enabled %}checked{% endif %}>
                <label class="form-check-label" for="group_notifications">Group Mentions & Activity</label>
            </div>
        </fieldset>

        <div class="form-group mt-4">
            <button type="submit" class="btn btn-primary">Save Settings</button>
        </div>
    </form>
</div>
{% endblock %}
