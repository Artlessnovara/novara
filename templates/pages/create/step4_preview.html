{% extends "base.html" %}

{% block title %}Create a Page - Step 4{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4>Create a Page (Step 4 of 4)</h4>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Preview & Publish</h5>
                    <p>This is how your page will look. If you're happy with it, publish it!</p>

                    <!-- Live Preview -->
                    <div class="page-preview" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; margin-bottom: 2rem;">
                        <div id="banner-preview" style="height: 200px; background-color: #eee; background-size: cover; background-position: center; background-image: url({{ url_for('static', filename=page_data.cover_banner_url) if page_data.cover_banner_url else '' }});"></div>
                        <div style="padding: 1rem;">
                            <div style="display: flex; align-items: flex-end; margin-top: -60px;">
                                <img id="pic-preview" src="{{ url_for('static', filename=page_data.profile_pic_url) if page_data.profile_pic_url else url_for('static', filename='images/course_placeholder.jpg') }}" alt="Profile Pic Preview" style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid white; object-fit: cover;">
                                <div style="margin-left: 1rem;">
                                    <h3 style="margin: 0;">{{ page_data.name }}</h3>
                                    <p style="color: #6c757d;">{{ page_data.category }}</p>
                                </div>
                            </div>
                            <hr>
                            <p><strong>Bio:</strong> {{ page_data.bio }}</p>
                            <p><strong>Contact:</strong> {{ page_data.email or 'N/A' }} | {{ page_data.phone_number or 'N/A' }}</p>
                            <p><strong>Website:</strong> <a href="{{ page_data.website }}">{{ page_data.website or 'N/A' }}</a></p>
                        </div>
                    </div>

                    <form method="POST" action="{{ url_for('pages.create_page_step4') }}">
                        <div class="text-right">
                             <a href="{{ url_for('pages.create_page_step3') }}" class="btn btn-secondary btn-lg">Back</a>
                            <button type="submit" class="btn btn-success btn-lg">Publish Page</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
