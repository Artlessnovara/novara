{% extends "feed/base.html" %}

{% block title %}Creativity Hub{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/creativity.css') }}">
{% endblock %}

{% block content %}
<div class="creativity-container">
    <div class="creativity-header">
        <h2>Creativity Hub</h2>
        {% if active_category != 'top_creators' %}
        <form action="{{ url_for('feed.search') }}" method="GET" class="creativity-search">
            <input type="hidden" name="c" value="{{ active_category }}">
            <input type="text" name="q" placeholder="Search in {{ active_category.replace('_', ' ')|title }}..." required>
            <button type="submit" class="search-icon-button"><i class="fas fa-search"></i></button>
        </form>
        {% endif %}
    </div>

    <nav class="creativity-tabs">
        <a href="{{ url_for('feed.creativity', category='art_design') }}" class="tab-link {% if active_category == 'art_design' %}active{% endif %}">🖼️ Art & Design</a>
        <a href="{{ url_for('feed.creativity', category='writing') }}" class="tab-link {% if active_category == 'writing' %}active{% endif %}">✍️ Writing</a>
        <a href="{{ url_for('feed.creativity', category='music_audio') }}" class="tab-link {% if active_category == 'music_audio' %}active{% endif %}">🎶 Music & Audio</a>
        <a href="{{ url_for('feed.creativity', category='reels') }}" class="tab-link {% if active_category == 'reels' %}active{% endif %}">🎥 Reels</a>
        <a href="{{ url_for('feed.creativity', category='challenges') }}" class="tab-link {% if active_category == 'challenges' %}active{% endif %}">🏆 Challenges</a>
        <a href="{{ url_for('feed.creativity', category='top_creators') }}" class="tab-link {% if active_category == 'top_creators' %}active{% endif %}">🌟 Top Creators</a>
    </nav>

    <div class="tab-content-wrapper">
        {% if active_category == 'art_design' %}
            <div id="art_design" class="tab-content active">{% include 'feed/tabs/art_design.html' %}</div>
        {% elif active_category == 'writing' %}
            <div id="writing" class="tab-content active">{% include 'feed/tabs/writing.html' %}</div>
        {% elif active_category == 'music_audio' %}
            <div id="music_audio" class="tab-content active">{% include 'feed/tabs/music_audio.html' %}</div>
        {% elif active_category == 'reels' %}
            <div id="reels" class="tab-content active">{% include 'feed/tabs/reels.html' %}</div>
        {% elif active_category == 'challenges' %}
            <div id="challenges" class="tab-content active">{% include 'feed/tabs/challenges.html' %}</div>
        {% elif active_category == 'top_creators' %}
            <div id="top_creators" class="tab-content active">{% include 'feed/tabs/top_creators.html' %}</div>
        {% endif %}
    </div>

</div>

<script>
// Basic script to handle tab switching without a full page reload,
// though the current setup reloads the page. This can be enhanced later.
document.addEventListener('DOMContentLoaded', function() {
    // The logic is handled by the backend route for now.
});
</script>
{% endblock %}
