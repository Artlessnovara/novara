{% extends "layouts/dashboard_layout.html" %}

{% block title %}Events{% endblock %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/events.css') }}">
{% endblock %}

{% block content %}
<div class="events-container">
    <div class="events-header">
        <h1>Upcoming Events</h1>
        <a href="{{ url_for('main.create_event') }}" class="btn btn-primary" id="create-event-btn">
            <i class="fas fa-plus"></i> Create Event
        </a>
    </div>

    <div class="events-controls">
        <div class="search-bar">
            <input type="text" placeholder="Search events...">
            <i class="fas fa-search"></i>
        </div>
        <div class="filters">
            <select>
                <option value="all">All</option>
                <option value="upcoming">Upcoming</option>
                <option value="past">Past</option>
                <option value="my_events">My Events</option>
            </select>
        </div>
    </div>

    <div class="events-grid">
        {% if events %}
            {% for event in events %}
            <div class="event-card">
                <div class="event-card-banner">
                    <img src="{{ url_for('static', filename=event.image or 'images/course_placeholder.jpg') }}" alt="{{ event.title }}">
                </div>
                <div class="event-card-content">
                    <h3 class="event-title">{{ event.title }}</h3>
                    <p class="event-date"><i class="fas fa-calendar-alt"></i> {{ event.date.strftime('%a, %b %d, %Y at %I:%M %p') }}</p>
                    <p class="event-location"><i class="fas fa-map-marker-alt"></i> {{ event.location }}</p>
                    <div class="event-organizer">
                        <img src="{{ url_for('static', filename='profile_pics/' + (event.organizer.profile_pic or 'default.jpg')) }}" alt="{{ event.organizer.name }}">
                        <span>{{ event.organizer.name }}</span>
                    </div>
                </div>
                <div class="event-card-footer">
                    <a href="{{ url_for('main.event_details', event_id=event.id) }}" class="btn btn-secondary">View Details</a>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="no-events">
                <p>No events found. Why not create one?</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block dashboard_scripts %}
    <script src="{{ url_for('static', filename='js/events.js') }}"></script>
{% endblock %}
